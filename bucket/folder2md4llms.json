{
    "version": "0.4.28",
    "description": "Enhanced tool to concatenate folder contents into markdown format for LLM consumption",
    "homepage": "https://github.com/henriqueslab/folder2md4llms",
    "license": "MIT",
    "depends": "python",
    "suggest": {
        "vcredist": "extras/vcredist2022"
    },
    "installer": {
        "script": [
            "Write-Host 'Installing folder2md4llms...' -ForegroundColor Green",
            "",
            "# Check for Python availability",
            "try {",
            "    $pythonCmd = Get-Command python -ErrorAction Stop",
            "    Write-Host \"Found Python at: $($pythonCmd.Source)\" -ForegroundColor Green",
            "} catch {",
            "    Write-Host 'Python not found in PATH. Please install Python 3.11+ first.' -ForegroundColor Red",
            "    Write-Host 'You can install Python via: scoop install python' -ForegroundColor Yellow",
            "    throw 'Python is required but not found'",
            "}",
            "",
            "# Reset Python environment to ensure proper configuration",
            "try {",
            "    Write-Host 'Resetting Python environment...' -ForegroundColor Yellow",
            "    scoop reset python 2>$null",
            "    Write-Host 'Python environment reset completed' -ForegroundColor Green",
            "} catch {",
            "    Write-Host 'Warning: Could not reset Python environment, continuing...' -ForegroundColor Yellow",
            "}",
            "",
            "# Install folder2md4llms package",
            "try {",
            "    Write-Host 'Installing folder2md4llms package...' -ForegroundColor Yellow",
            "    python -m pip install --upgrade --force-reinstall \"folder2md4llms==$version\"",
            "    Write-Host 'Package installation completed!' -ForegroundColor Green",
            "} catch {",
            "    Write-Host 'Package installation failed. Error details:' -ForegroundColor Red",
            "    Write-Host $_.Exception.Message -ForegroundColor Red",
            "    throw",
            "}",
            "",
            "# Verify installation",
            "try {",
            "    Write-Host 'Verifying installation...' -ForegroundColor Yellow",
            "    python -m folder2md4llms.cli --version",
            "    Write-Host 'Installation verification successful!' -ForegroundColor Green",
            "} catch {",
            "    Write-Host 'Installation verification failed. Package may not be properly installed.' -ForegroundColor Red",
            "    Write-Host 'Error: ' + $_.Exception.Message -ForegroundColor Red",
            "    throw",
            "}",
            "",
            "# Register Python with Windows registry for proper discovery",
            "try {",
            "    $regFile = \"$env:USERPROFILE\\scoop\\apps\\python\\current\\install-pep-514.reg\"",
            "    if (Test-Path $regFile) {",
            "        Write-Host 'Registering Python with Windows registry...' -ForegroundColor Yellow",
            "        Start-Process -FilePath 'regedit' -ArgumentList '/s', $regFile -Wait",
            "        Write-Host 'Python registry registration completed' -ForegroundColor Green",
            "    } else {",
            "        Write-Host 'Registry file not found, skipping registration' -ForegroundColor Yellow",
            "    }",
            "} catch {",
            "    Write-Host 'Warning: Could not register Python with registry, continuing...' -ForegroundColor Yellow",
            "}"
        ]
    },
    "uninstaller": {
        "script": [
            "Write-Host 'Uninstalling folder2md4llms...' -ForegroundColor Yellow",
            "",
            "# Comprehensive cleanup of folder2md4llms package",
            "try {",
            "    Write-Host 'Checking for existing installation...' -ForegroundColor Yellow",
            "    $pipList = python -m pip list | Select-String 'folder2md4llms'",
            "    if ($pipList) {",
            "        Write-Host 'Found folder2md4llms installation, removing...' -ForegroundColor Yellow",
            "        python -m pip uninstall -y folder2md4llms",
            "        Write-Host 'Package uninstallation completed!' -ForegroundColor Green",
            "    } else {",
            "        Write-Host 'No folder2md4llms installation found in pip' -ForegroundColor Yellow",
            "    }",
            "} catch {",
            "    Write-Host 'Package uninstallation failed or package was not found.' -ForegroundColor Red",
            "    Write-Host \"Error: $($_.Exception.Message)\" -ForegroundColor Red",
            "}",
            "",
            "# Clean up batch files",
            "try {",
            "    Write-Host 'Cleaning up command wrappers...' -ForegroundColor Yellow",
            "    $batchFile = \"$dir\\folder2md.cmd\"",
            "    $psFile = \"$dir\\folder2md.ps1\"",
            "    ",
            "    if (Test-Path $batchFile) {",
            "        Remove-Item $batchFile -Force",
            "        Write-Host 'Removed folder2md.cmd wrapper' -ForegroundColor Green",
            "    }",
            "    ",
            "    if (Test-Path $psFile) {",
            "        Remove-Item $psFile -Force",
            "        Write-Host 'Removed folder2md.ps1 wrapper' -ForegroundColor Green",
            "    }",
            "} catch {",
            "    Write-Host 'Warning: Could not clean up command wrappers' -ForegroundColor Yellow",
            "}",
            "",
            "Write-Host 'folder2md4llms uninstallation complete!' -ForegroundColor Green"
        ]
    },
    "post_install": [
        "Write-Host 'Setting up folder2md command...' -ForegroundColor Yellow",
        "",
        "# Create batch file wrapper for folder2md command",
        "$batchFile = \"$dir\\folder2md.cmd\"",
        "$batchContent = \"@echo off`r`npython -m folder2md4llms.cli %*\"",
        "$batchContent | Set-Content -Path $batchFile -Encoding ascii",
        "Write-Host \"Created folder2md.cmd wrapper at: $batchFile\" -ForegroundColor Green",
        "",
        "# Create PowerShell script wrapper for better compatibility",
        "$psFile = \"$dir\\folder2md.ps1\"",
        "$psContent = \"python -m folder2md4llms.cli @args\"",
        "$psContent | Set-Content -Path $psFile -Encoding utf8",
        "Write-Host \"Created folder2md.ps1 wrapper at: $psFile\" -ForegroundColor Green",
        "",
        "# Verify the command works",
        "try {",
        "    Write-Host 'Testing folder2md command...' -ForegroundColor Yellow",
        "    & \"$batchFile\" --version",
        "    Write-Host 'Command test successful!' -ForegroundColor Green",
        "} catch {",
        "    Write-Host 'Warning: Command test failed, but installation may still work' -ForegroundColor Yellow",
        "    Write-Host \"Error: $($_.Exception.Message)\" -ForegroundColor Yellow",
        "}",
        "",
        "Write-Host 'folder2md4llms installation complete!' -ForegroundColor Green",
        "Write-Host ''",
        "Write-Host 'Usage:'",
        "Write-Host '  folder2md . --output output.md    # Process current directory'",
        "Write-Host '  folder2md --help                  # Show all options'",
        "Write-Host '  python -m folder2md4llms.cli      # Alternative direct access'",
        "Write-Host ''",
        "Write-Host 'If the folder2md command is not found:'",
        "Write-Host '  1. Restart your terminal/command prompt'",
        "Write-Host '  2. Run: scoop reset folder2md4llms'",
        "Write-Host '  3. Use: python -m folder2md4llms.cli instead'",
        "Write-Host ''",
        "Write-Host 'Documentation: https://github.com/henriqueslab/folder2md4llms'"
    ],
    "bin": [
        "folder2md.cmd",
        "folder2md.ps1"
    ],
    "checkver": {
        "url": "https://pypi.org/pypi/folder2md4llms/json",
        "jsonpath": "$.info.version"
    },
    "autoupdate": {
        "note": "This package is installed via pip and will be updated automatically when the version changes"
    },
    "notes": [
        "This package requires Python 3.11 or higher to be installed.",
        "If Python is not available, install it first: scoop install python",
        "The package is installed via pip and managed by Python's package system.",
        "",
        "TROUBLESHOOTING:",
        "If 'folder2md' command is not found:",
        "  1. Restart your terminal/command prompt",
        "  2. Run: scoop reset folder2md4llms",
        "  3. Run: scoop reset python",
        "  4. Use: python -m folder2md4llms.cli instead",
        "",
        "If getting 'ModuleNotFoundError':",
        "  1. Check: python -m pip list | findstr folder2md4llms",
        "  2. Reinstall: scoop uninstall folder2md4llms && scoop install folder2md4llms",
        "  3. Run registry file: %USERPROFILE%\\scoop\\apps\\python\\current\\install-pep-514.reg",
        "",
        "To update manually: python -m pip install --upgrade folder2md4llms",
        "Documentation: https://github.com/henriqueslab/folder2md4llms"
    ]
}